# Network

## 简介

### 定义
欧拉的七座桥问题，衍生出拓扑学。计算机网络拓扑结构是指网络中各个站点相互连接的形式。

计算机网络，是指将地理位置不同的、具有独立功能的多台计算机及其外部设备，通过通信线路连接起来，在网络操作系统，网络管理软件及网络通信协议的管理和协调下，实现资源共享和信息传递的计算机系统。

- 连通性
- 共享性

### 发展

ENIAC，全称为Electronic Numerical Integrator And Calculator，即电子数字积分计算机。

SAGE(赛其)半自动地面防空系统20世纪50年代初，美国为了自身的安全，在美国本土北部和加拿大境内，建立了一个半自动地面防空系统，简称SAGE系统。译成中文叫赛其系统。

1969年美国国防部高级研究计划署（ARPA）建立ARPANet。ARPANet最初只包括四个站点，即加州大学洛杉矶分校UCLA、加州大学圣巴巴拉分校UCSB、犹他大学Utah和斯坦福研究所SRI。ARPANet开始采用由加州大学洛杉矶分校的斯蒂夫.克洛克设计的网络控制协议NCP（Network Control Protocol）。1971年ARPANet发展到15个站点，23台主机。新接入的站点包括哈佛大学、斯坦福大学、林肯实验室、麻省理工学院、卡内基.梅隆大学、美国航空航天局的Ames研究中心等。1972年互联网工作组（INWG）宣告成立。其目的在于建立互联网通讯协议，主席是斯坦福的温登.泽夫。1973 年ARPANet扩展成国际互联网。第一批接入的有英国和挪威的计算机。

计算机网络协议是有关计算机网络通信的一整套规则，或者说是为完成计算机网络通信而制订的规则、约定和标准。网络协议由语法、语义和时序三大要素组成；语法是指通信数据和控制信息的结构与格式；语义是对具体事件应发出何种控制信息，完成何种动作以及做出何种应答；时序是对事件实现顺序的详细说明。每种网络协议都有自己的优点，但只有TCP/IP允许与Internet完全的连接。

互联网、因特网、万维网三者的关系是：互联网包含因特网，因特网包含万维网。凡是能彼此通信的设备组成的网络就叫互联网。所以，即使仅有两台机器，不论用何种技术使其彼此通信，也叫互联网。国际标准的互联网写法是internet，字母i一定要小写！因特网是互联网的一种。因特网可不是仅有两台机器组成的互联网，它是由上千万台设备组成的互联网。因特网使用TCP/IP协议让不同的设备可以彼此通信。但使用TCP/IP协议的网络并不一定是因特网，一个局域网也可以使用TCP/IP协议。判断自己是否接入的是因特网，首先是看自己电脑是否安装了 TCP/IP协议，其次看是否拥有一个公网地址（所谓公网地址，就是所有私网地址以外的地址）。国际标准的因特网写法是Internet，字母I一定要大写！

因特网是基于TCP/IP协议实现的，TCP/IP协议由很多协议组成，不同类型的协议又被放在不同的层，其中，位于应用层的协议就有很多，比如FTP、SMTP、HTTP。只要应用层使用的是HTTP协议，就称为万维网（World Wide Web）。之所以在浏览器里输入百度网址时，能看见百度网提供的网页，就是因为您的个人浏览器和百度网的服务器之间使用的是HTTP协议在交流。

### ISP
ISP(Internet Service Provider)，互联网服务提供商，即向广大用户综合提供互联网接入业务、信息业务、和增值业务的电信运营商。

### NAP
网络接入点

## 网络协议
### OSI
OSI/RM Open System Interconnection/Reference Model

  OSI,开放系统互联模型。

| Level | EN   |数据单位 | 解释 |
| ----- | ---- |---- | ------- |
| 应用层 | Application  | APDU | 用户接口，比如浏览器界面 |
| 表示层 | Presentation | PPDU | 数据表现形式，ASCII, mp3, jpg, 压缩，加密 |
| 会话层 | Session      | SPDU | 管理会话层，建立，管理，结束会话。比如判断是否给传输层 |
| 传输层 | Transport    | TPDU | TCP/UDP可靠或不可靠传输，端口号 |
| 网络层 | Network      | 报文 | 存着IP地址，用于外网通信 |
| 数据链路层 | Data Link | 帧 | 帧中存储着MAC地址，也就是网卡的物理地址，负责局域网络 | 
| 物理层 | Physical    |Bit | 比特流传输，物理接口，电气特性 |

    上层最接近用户。上三层给用户提供服务，没有网络也需要这三层，下四层用于数据传输。
    PDU: Protocol Data Unit。

第七层应用层：应用层是OSI参考模型中的最高层，也是最接近用户的一层，用户可以利用不同的应用软件产生或得到不同类型（例如语音、文字、图片等）的网络数据。这一层主要是为操作系统或网络应用程序提供访问网络服务的接口。

第六层表示层：这一层提供格式化的表示和转换数据服务，解决上一层用户信息的语法表示问题，对数据进行压缩、格式转换、加密和解密等工作，并为下一层实现其功能做好准备。

第五层会话层：该层负责在两个节点间建立端与端的连接，进行对话的连接、管理和拆除，但是会话层并不参与具体的传输。在表示层和会话层数据被转换为数据单元。

第四层传输层：数据经过前三层已经做好了传输的准备，而在传输层上数据单元变为段或者报文，该层提供端到端（最终用户到最终用户）的透明的、可靠地数据传输服务，并处理端到端的差错控制和流程控制问题。

第三层网络层：计算机网络通信中会经过多个数据链路和通信子网，网络层就是选择合适的网间路由和交换节结点，来确保数据的及时传输。此外，在这一层还可以实现网络的拥塞控制、网际互连等功能。在这一层中通过IP地址来寻址，数据以分组为单位，称为报文分组数据。

第二层数据链路层：该层也用于数据传输，与网络层不同的，在这一层中通过MAC地址（物理地址）来寻址，并且给保温分组数据加上头部与尾部，变为我们所熟知的帧。数据链路层的主要作用是通过校验、确认和反馈重发等手段，将不可靠的物理链路改造成对网络层来说无差错的数据链路，并且进行流量控制防止阻塞。

第一层物理层：物理层是最底层，如果说前几个层次的数据变化和传输比较虚拟，那在物理层数据就在具体的物理媒介中进行传输，此时数据被称为比特流。物理层上的传输介质有很多，例如我们熟知的光纤，双绞线，同轴电缆，无线电波等介质。


### TCP/IP

TCP/IP：Transmission Control Protocol/Internet Protocol的简写，中译名为传输控制协议/因特网互联协议，又叫网络通讯协议，是Internet最基本的协议、Internet国际互联网络的基础，由网络层的IP协议和传输层的TCP协议组成。TCP/IP 定义了电子设备如何连入因特网，以及数据如何在它们之间传输的标准。协议采用了4层的层级结构，每一层都呼叫它的下一层所提供的协议来完成自己的需求。通俗而言：TCP负责发现传输的问题，一有问题就发出信号，要求重新传输，直到所有数据安全正确地传输到目的地。而IP是给因特网的每一台联网设备规定一个地址。


| Level | 解释 |
| ----- | ---- |
| 应用层 | 对应OSI上三层 FTP, Telnet, DNS, SMTP|
| 传输层 | OSI 传输层 TCP, UDP|
| 网际互联层 | OSI 网络层 IP协议，IGMP，ICMP互联网控制报文协议(ping)|
| 网络接口层 | OSI 下两层 ARP地址解析协议工作这层| 

与OSI参考模型不同，TCP/IP协议只有4个层次，从高到低分别为应用层、传输层、互联层和主机-网络层。TCP/IP协议中的应用层与OSI参考模型中的应用层、表示层和会话层相对应，执行它们所完成的任务，对数据做最初的处理形成数据单元，其中包含FTP、SMPT、DNS等协议；TCP/IP协议中的传输层和互联层与OSI参考模型中的传输层和网络层一一对应，完成这两层的任务，其中传输层中包含TCP和UDP这两个重要协议，互联层包含IP这个重要协议；而OSI参考模型中的数据链路层和物理层在TCP/IP协议中被分为一层即主机-网络层，其中包含Ethernet、Token Ring等协议

### FTP
FTP协议（文件传输协议File Transfer Protocol）工作在TCP/IP参考模型的应用层，是基于传输协议TCP的一个协议。同大多数Internet服务一样，FTP也是一个客户/服务器系统，即FTP协议包括两个重要的组成部分，FTP服务器和FTP客户端。FTP服务器用于存储和传送文件，用户使用FTP客户端通过FTP协议与服务器传送文件或访问位于服务器上的资源。

一个FTP服务器进程可以同时为多个客户进程提供服务。FTP服务器进程由两大部分组成：一个主进程，负责接收新的请求；另外有多个从属进程，负责处理单个请求。

主进程接收新请求的步骤是：
- 打开服务器端的21号端口，使控制连接链路打开；
- 服务器端等待客户进程发出连接请求，客户端打开一个临时的端口，用于进行数据连接；
- 服务器端接收到连接请求并响应，打开20号或其他大于1024号的端口用于数据连接，并建立起数据连接；
- 服务器端启动从属进程来处理客户进程发出的请求；
- 从属进程对客户进程处理完毕后，客户端发送关闭连接请求，服务端响应后终止此次文件传输；
- 服务器端回到等待状态，继续接受其他进程发送的请求。

要注意的是，主进程与从属进程的处理是并发进行的。

FTP支持两种工作模式，一种叫做Port模式（主动模式），另一种为Passive模式（被动模式）。在主动模式下，客户端现在FTP服务器的21号端口建立连接，发送Port命令，并打开一个随机端口与服务器端的20号端口进行数据发送和接收；而在被动模式下，客户端发送的不是Port命令而是Passive命令，而且服务器端与客户端进行数据连接时打开的是一个大于1024号的端口，不再是确定的20号端口。由于Passive模式下在服务器端打开的是一个任意端口，很多防火墙设置的时候不允许接收外部发起的连接，所以许多防火墙或者内网的FTP服务器不支持Passive模式。

对于搭建FTP服务器，通常可以使用Server U软件；而对于FTP客户端，简单的我们可以直接利用浏览器，当然也可以使用专门的软件，例如CuteFTP、FlashFTP、FTP Explorer等。


1. 计网

1. 1. http状态码

1. 1. 1. 4xx

1. 1. 1. 1. 403、404、499

1. 1. 1. 5xx

1. 1. 1. 1. 502、504、
         2. 502、504的区别

1. 1. TCP

1. 1. 1. TCP是怎么保持长链接的？如果用TCP做长链，怎么保持？
      2. 长链和短链有什么区别？

1. 1. 1. 1. tcp的探活(心跳)是多长时间？



1. jwt

1. 1.  使用流程
   2. access token过期怎么去找到对应的 refresh token
   3. 为什么要用两个，而不用一个token
   4. refresh token的作用
   5. 直接给你两周的access token 为什么还要设计refresh token
   6. 额外设计refresh token的意义是什么

1. 计网

1. 1. cookie、session、token
   2. cookie+session 的问题
   3. http协议介绍一下
   4. udp啥时候有作用
   5. get/post 请求的区别
   6. https
   7. https加密的过程
   8. 整个后期数据传输的加密的密钥都是客户端生成的吗？


    学习过程中有遇到什么tcp相关的问题？
4. 什么情况下会发生快速重传？



1. 1. **错误码可以自定义吗？**

1. 1. 1. 常见自定义错误码

- - - 暂定都是5位数字
    - 0标识成功,其他都表示错误
    - 错误码按模块按功能场景分级分段

- - - - 前三位表示模块
      - 第四位表示模块下的功能

- - - 示例:

- - - - 商城系统里有交易模块和商品模块

- - - - - 401开头的表示交易模块

- - - - - - 4011开头的表示交易模块里的下单场景需要用到的错误码

- - - - - 402开头的表示商品模块

- - - - - - 4021表示商品模块下的添加商品场景里需要用到的错误码

- - - - - 如果某个场景功能下需要的比较多的错误码，则可以使用其他未被使用的码段，即该场景功能可以拥有多个码段，然后通过添加注释等方式让人理解即可。

- - - 数字 1 开头的错误码表示

- - - - 系统级别的错误

- - - - - 缺少某种字符集，连不上数据库之类的，系统级的错误码不需要分模块，可以按照自增方式进行添加

- - - 数字 4 开头的错误码表示

- - - - API参数校验失败

- - - - - “交易模块下单场景中，订单金额参数不能为空” 可以用 40111 错误码来表示

- - - 数字 5 开头的错误码表示

- - - - 后台业务校验失败

- - - - - “交易模块下单场景中，该用户没有下单权限” 可以用 50111 错误码来表示

- - - 注意

- - - - 数字 4 开头的错误码与数字 5 开头的错误码对应的模块分类需要保持一致，即 4011 表示交易模块下单场景的API错误，5011 表示交易模块下单场景的业务错误错误码按需分配，逐步增加，灵活扩展



http的请求头和响应头里的信息